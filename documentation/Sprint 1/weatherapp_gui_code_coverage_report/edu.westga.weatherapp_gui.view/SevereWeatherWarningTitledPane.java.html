<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SevereWeatherWarningTitledPane.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">weatherapp_gui</a> &gt; <a href="index.source.html" class="el_package">edu.westga.weatherapp_gui.view</a> &gt; <span class="el_source">SevereWeatherWarningTitledPane.java</span></div><h1>SevereWeatherWarningTitledPane.java</h1><pre class="source lang-java linenums">package edu.westga.weatherapp_gui.view;

import java.io.FileNotFoundException;
import java.io.IOException;

import edu.westga.weatherapp_gui.App;
import edu.westga.weatherapp_gui.model.DateTimeConverter;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.scene.control.ScrollPane;
import javafx.scene.control.TitledPane;
import javafx.scene.text.Text;

/**
 * The Severe Weather Warning Titled Pane class for representing this specific
 * type of titled pane.
 * 
 * @author Eboni Walker
 * @version 1.0
 */
public class SevereWeatherWarningTitledPane extends TitledPane {

    /**
     * If the warning's name cannot be found the titled pane uses instead
     */
    public static final String UNDETERMINED_WARNING = &quot;Undetermined Warning Type&quot;;

    /**
     * If the starting date cannot be found the titled pane uses instead
     */
    public static final String UNDETERMINED_START = &quot;Undetermined Start Date&quot;;

    /**
     * If the ending date cannot be found the titled pane uses instead
     */
    public static final String UNDETERMINED_END = &quot;Undetermined End Date&quot;;

    /**
     * If the details cannot be found the titled pane uses instead
     */
    public static final String UNDETERMINED_DETAILS = &quot;No Details&quot;;

    /**
     * this severe weather warning titled pane
     */
    @FXML
    private TitledPane severeWarningTitledPane;

    /**
     * this severe weather warning titled pane's scroll pane
     */
    @FXML
    private ScrollPane severeWarningScrollPane;

    /**
     * this severe weather warning titled pane's description textbox
     */
    @FXML
    private Text description;

    /**
     * the warning name of the severe weather warning that this titled pane
     * represents
     */
    private String warningName;

    /**
     * the starting date of the severe weather warning that this titled pane
     * represents
     */
    private String startingDate;

    /**
     * the ending date of the severe weather warning that this titled pane
     * represents
     */
    private String endingDate;

    /**
     * the timezone of the severe weather warning that this titled pane represents
     */
    private String timezone;

    /**
     * the details of the severe weather warning that this titled pane
     * represents
     */
    private String details;

    /**
     * the raw data of the severe weather warning that this titled pane
     * represents
     */
    private String rawData;

    /**
     * TODO change arrow to icons TODO Finish error label message and displaying add
     * it to the fxml as well 
     * Finish pan viewl model Finish tests
     */

    /**
     * Creates an instance of the Severe Weather Warning Titled Pane
     * 
     * @param warningName  the warning's name
     * @param startingDate the start date of the warning's period of effect
     * @param endingDate   the end date of the warning's period of effect
     * @param details      a description of the warning
     * @param timezone     the timezone of the warning
     * @param rawData      the original raw data of the warning
     * @throws FileNotFoundException
     */
    public SevereWeatherWarningTitledPane(String warningName, String startingDate, String endingDate, String details,
<span class="nc" id="L114">             String timezone, String rawData) {</span>
<span class="nc" id="L115">        FXMLLoader fxmlLoader = new FXMLLoader(getClass().getResource(App.SEVERE_WARNINGS_TITLED_PANE_VIEW));</span>
<span class="nc" id="L116">        fxmlLoader.setRoot(this);</span>
<span class="nc" id="L117">        fxmlLoader.setController(this);</span>
        try {
<span class="nc" id="L119">            fxmlLoader.load();</span>
<span class="nc" id="L120">            this.setWarningNameDisplayValue(warningName);</span>
<span class="nc" id="L121">            this.setTimezone(timezone);</span>
<span class="nc" id="L122">            this.setStartingDateDisplayValue(startingDate);</span>
<span class="nc" id="L123">            this.setEndingDateDisplayValue(endingDate);</span>
<span class="nc" id="L124">            this.setDetailsDisplayValue(details);</span>
<span class="nc" id="L125">            this.setDescriptionTextValue();</span>
<span class="nc" id="L126">            this.setRawData(rawData);</span>
<span class="nc" id="L127">        } catch (IOException ex) {</span>
<span class="nc" id="L128">            System.err.println(&quot;IO Exception - Error creating severe warning titled pane.&quot;);</span>
<span class="nc" id="L129">            ex.printStackTrace();</span>
<span class="nc" id="L130">        }</span>
<span class="nc" id="L131">    }</span>

    /**
     * Gets the name of the severe weather warning
     * 
     * @return the warning's name
     */
    public String getWarningName() {
<span class="nc" id="L139">        return this.warningName;</span>
    }

    /**
     * Gets the String date of the severe weather warning.
     * 
     * @return the warning's starting date
     */
    public String getStartingDate() {
<span class="nc" id="L148">        return this.startingDate;</span>
    }

    /**
     * Gets the ending date of the severe weather warning.
     * 
     * @return the warning's ending date
     */
    public String getEndingDate() {
<span class="nc" id="L157">        return this.endingDate;</span>
    }

    /**
     * Gets the description of the severe weather warning
     * 
     * @return the warning's description
     */
    public Text getDescription() {
<span class="nc" id="L166">        return this.description;</span>
    }

    /**
     * Gets the raw data of the severe weather warning
     * 
     * @return the warning's raw data
     */
    public String getRawData() {
<span class="nc" id="L175">        return this.rawData;</span>
    }

    /**
     * Sets the name of the severe weather warning
     * 
     * @param warningName the name of the severe weather warning
     */
    private void setWarningNameDisplayValue(String warningName) {
<span class="nc bnc" id="L184" title="All 4 branches missed.">        if (warningName == null || warningName.isBlank()) {</span>
<span class="nc" id="L185">            warningName = SevereWeatherWarningTitledPane.UNDETERMINED_WARNING;</span>
        }
<span class="nc" id="L187">        this.warningName = warningName;</span>
<span class="nc" id="L188">        this.severeWarningTitledPane.setText(warningName);</span>
<span class="nc" id="L189">    }</span>

    /**
     * Sets the ending date of the severe weather warning
     * 
     * @param startingDate the starting date of the severe weather warning
     */
    private void setStartingDateDisplayValue(String startingDate) {
<span class="nc bnc" id="L197" title="All 4 branches missed.">        if (startingDate == null || startingDate.isBlank()) {</span>
<span class="nc" id="L198">            startingDate = SevereWeatherWarningTitledPane.UNDETERMINED_START;</span>
        }
<span class="nc" id="L200">        this.startingDate = DateTimeConverter.ConvertUtcToShortDate(Long.parseLong(startingDate), Long.parseLong(this.timezone));</span>
<span class="nc" id="L201">    }</span>

    /**
     * Sets the ending date of the severe weather warning
     * 
     * @param endingDate the ending date of the severe weather warning
     */
    private void setEndingDateDisplayValue(String endingDate) {
<span class="nc bnc" id="L209" title="All 4 branches missed.">        if (endingDate == null || endingDate.isBlank()) {</span>
<span class="nc" id="L210">            endingDate = SevereWeatherWarningTitledPane.UNDETERMINED_END;</span>
        }
<span class="nc" id="L212">        this.endingDate = DateTimeConverter.ConvertUtcToShortDate(Long.parseLong(endingDate), Long.parseLong(this.timezone));</span>
<span class="nc" id="L213">    }</span>

    /**
     * Sets the timezone of the severe weather warning
     * 
     * @param timezone the timezone of the severe weather warning
     */
    private void setTimezone(String timezone) {
<span class="nc bnc" id="L221" title="All 4 branches missed.">        if (timezone == null || timezone.isBlank()) {</span>
<span class="nc" id="L222">            timezone = &quot;0000&quot;;</span>
        }
<span class="nc" id="L224">        this.timezone = timezone;</span>
<span class="nc" id="L225">    }</span>

    /**
     * Sets the details of the severe weather warning's descrption.
     * 
     * @param details the details of the severe weather warning.
     */
    private void setDetailsDisplayValue(String details) {
<span class="nc bnc" id="L233" title="All 4 branches missed.">        if (details == null || details.isBlank()) {</span>
<span class="nc" id="L234">            details = SevereWeatherWarningTitledPane.UNDETERMINED_DETAILS;</span>
        }
<span class="nc" id="L236">        this.details = details.replaceAll(&quot;\n&quot;, &quot; &quot;);</span>
<span class="nc" id="L237">    }</span>

    /**
     * Sets the raw data of the titled pane's severe weather warning data.
     * 
     * @param rawData the raw data of the titled pane's severe weather warning data.
     */
    private void setRawData(String rawData) {
<span class="nc" id="L245">        this.rawData = rawData;</span>
<span class="nc" id="L246">    }</span>

    /**
     * Sets the text content of the titled pane's drop down view.
     */
    private void setDescriptionTextValue() {
<span class="nc" id="L252">        String skipLine = System.lineSeparator() + System.lineSeparator();</span>
<span class="nc" id="L253">        String termSpacer = &quot;\t\t&quot;;</span>
<span class="nc" id="L254">        String formattedDescription = String.format(</span>
                &quot;%1$s&quot; + skipLine + &quot;Starting Date: %2$s&quot; + termSpacer + &quot; Ending Date: %3$s&quot; + skipLine + &quot;%4$s&quot;,
                this.warningName, this.startingDate, this.endingDate, this.details);
<span class="nc" id="L257">        this.description.setText(formattedDescription);</span>
<span class="nc" id="L258">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>